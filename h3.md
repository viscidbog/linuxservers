# Hello Web Server

## x) Yleistä virtuaalipalvelimista

Name-based virtual hosting tarkoittaa sitä, että samasta IP-osoitteesta voi vastata monta eri palvelinta. 

Näitä käytetään niin, että Apachen conffitiedostoon tehdään koodiblocki jokaisesta virtuaalipalvelimesta, johon laitetaan portti, serverin nimi, serverin alias sekä tiedostopolku, joka sisältää näytettävän sisällön, yleensä html-tiedostoja.

## a) 

Apache asennettiin viime tunnilla ja hyvin lähtee pyörimään:

<img width="846" height="370" alt="image" src="https://github.com/user-attachments/assets/7a9ad596-9e5f-41a0-a7ed-927e27ef9068" />

## b)

Kirjoittamalla `sudo tail -f /var/log/apache2/access.log` saadaan logitiedosto reealiaikaisesti näkyviin. Kun avataan localhost selaimessa,
saadaan seuraavaa. Rivien sisältö menee näin: 
- IP-osoite, josta http-pyyntö tuli virtuaalipalvelimeen.
- Pyynnön lähettäjän henkilöllisyys ja käyttäjä-ID, molemmat tyhjiä tässä tapauksessa.
- Timestamp, jolloin pyyntö saapui
- HTTP-pyynnön metodi ja pyydetty resurssi (sekä protokollaversio ensimmäisessä rivissä: HTTP/1.1)
- HTTP status code (200 tarkoittaa OK)
- Clientille lähtetetyn resurssin koko tavuina
- Referrer url, eli sivu joka linkkasi tähän resurssiin
- User Agent, joka näyttää clientin selaimen tiedot

<img width="1821" height="60" alt="image" src="https://github.com/user-attachments/assets/af920fca-213f-470e-ae32-98d492bd7185" />

Eli rivi riviltä:
- Palvelimelle tulee GET-pyyntö, jossa selain pyytää polkua `/` eli pääsivua, joka tässä on index.html
- Em. tiedosto referoi kuvaa `/icons/openlogo-75.png` joten selain pyytää sitä ja saa sen (HTTP-koodi 200 eli ok, tiedoston koko noin 6 kb)
- Selain pyytää favicon.ico-tiedostoa, mutta koska sitä ei löydy, palautetaan 404-koodi eli not found.

## c) ja e)

Tehdään microlla uusi .conf-tiedosto:
<img width="826" height="514" alt="image" src="https://github.com/user-attachments/assets/811ba537-99b0-4dab-90fd-b3908e950c7b" />

Huomataan, ettei kaikilla ole oikeuksia muokata sitä:
<img width="639" height="130" alt="image" src="https://github.com/user-attachments/assets/6b5ff8b5-eecb-43c1-8347-93921af29bbc" />

Ja vaihdetaan oikeudet:
<img width="929" height="26" alt="image" src="https://github.com/user-attachments/assets/007ef172-1868-40f6-9c51-78a7e4af8fc6" />

Poistetaan vanhat sivut käytöstä:
<img width="886" height="229" alt="image" src="https://github.com/user-attachments/assets/d123c438-6cf9-4397-9d73-8c748ab334f8" />

Laitetaan uusi sivu käyttöön ja ladataan apache uusiksi:
<img width="948" height="114" alt="image" src="https://github.com/user-attachments/assets/c9cdc2d0-f2a8-4e72-bd78-35671acd10b6" />

Tehdään oma html-tiedosto, joka on validoitu, polkuun jolla .conf-file osaa sen hakea:
<img width="643" height="401" alt="image" src="https://github.com/user-attachments/assets/c35ef96b-7467-40c9-985c-e5e1f0d78db9" />

Tässä vaiheessa huomataan, että localhostissa näkyy edelleen kohdan a) defaultti index.html, joten muokataan conf-filea ja
lisätään rivit
`Options Indexes FollowSymLink`
`AllowOverride All`:
<img width="657" height="368" alt="image" src="https://github.com/user-attachments/assets/30800fcc-9cfb-4107-b7a6-ba5db33ce6c4" />

Ja näin huomataan, että uusi index.html lähtee toimimaan localhostista:
<img width="363" height="210" alt="image" src="https://github.com/user-attachments/assets/ccd54c14-ca68-4052-8cf7-535ac28dfcb9" />

## f)

Curl localhost näyttää plaintextina html:n, johon viitataan:
<img width="688" height="341" alt="image" src="https://github.com/user-attachments/assets/944e78d5-dc1f-429a-babb-5bb996707a1c" />

Curl -I sitä vastoin:

<img width="720" height="202" alt="image" src="https://github.com/user-attachments/assets/58f0d90b-fa46-4f06-b753-bf85eb7857c4" />

Tässä näkyy palvelimen lähettämää tietoa headerissa, eli HTTP-vastauksen alkuun liitettävässä tietopaketissa. Tässä nähdään protokollaversio,
HTTP statuskoodi 200 eli OK, timestamp, käytetty serveri, viimeksi muokatun timestamp, ja palautetun sisällön pituus bitteinä sekä 
sisällön tyyppi, eli text/html.

## m) 
<img width="597" height="169" alt="image" src="https://github.com/user-attachments/assets/25bdc463-51b2-406a-8dbf-ba6a8f9c9914" />


## Lähteet

- https://www.sumologic.com/blog/apache-access-log
- https://www.w3.org/International/questions/qa-html-language-declarations
- https://validator.w3.org/
- https://en.wikipedia.org/wiki/List_of_HTTP_header_fields
